1.为了控制场景面数，引入HLOD导出流程

2.billboard tree降低场景面数。

1. 当前方案：
   1. 简单billboard，只有一个方向信息，穿帮明显，效果一般。
   2. 堡垒之夜的impostor：半球分布上烘焙64个方向的信息，图的数量多，内存开销大，显示效果粗糙

2. 新方案：烘焙八个方向上的信息。

   1. 计算模型包围球，从包围球水平截面平分八个点，作为烘焙时相机的位置。
   2. 采用正交相机烘焙。烘焙出三张图：base，normal和sh阴影信息图。

   3. 注意事项：

      1. 超采样避免噪点问题
      2. 扩边来避免黑边问题
      3. 拉伸问题，计算包围球半径，根据包围球半径来确定正交相机的projection matrix
      4. 移位问题。烘焙时相机不能朝向计算出来的包围球中心位置，而要朝向模型的原点中心位置，确保不会发生移位问题
      5. mesh生成：其实mesh就是一个片，最简单的方法就是也根据bake时projection matrix的设定，即包围包围球的长方形mesh。但是这样会出现大量的冗余像素，增大运行时开销。为了尽可能贴合模型，mesh的高度就取包围盒的高度，mesh的宽度包围盒xz的宽度与包围球的差值来计算

   4. 运行：

      首先使面片永远朝向相机，然后根据模型朝向和相机方向的夹角，从八张图中选一个作为当前展示面片。

   5. 缺点：内存占用问题，阴影计算问题（shadowBitTool），跳转时的突变问题。

HLOD配合billboardTree，在保证效果的前提下，极大的减轻了场景中的面数压力

#### 开镜优化：

游戏中发现有时候开镜卡顿严重。尝试复现后发现在开镜卡顿的场景有：

1. 开镜者在灌木从中。对于开镜者在灌木中。开镜时会通过dither机制来削弱灌木对视野的遮挡，提升游戏体验。对于dither机制，会在ps中丢弃大量原本可见的像素。**解释下alpha test消耗的原因。**移动平台极端下帧率会下降10多帧。
2. 被瞄准者在灌木从中。跟上个场景原理类似。被瞄准者在灌木从中时，开镜对准这个灌木丛，会导致全屏幕被这个灌木覆盖，带来满屏alpha test消耗。这种情形只能通过暂时降低灌木的面数来解决。
3. 朝向大片开旷场景开镜时。lod切换策略问题。基于屏幕占比的lod切换策略，但是没有适配开镜时的变化，导致开镜时面数暴增。

(解释下游戏运行机制)

解决方案：

1. 新的dither方案：将需要dither的灌木，重新起一张小的RT，尺寸128或者256，将需要dither的物体绘制到这样小RT上，后续将这张小RT混合到主RT上。通过缩下RT，极大的降低了dither的开销。对于移动平台，虽然绘制中会带来一次RT的切换，但是最终的收益还是更高，移动平台上普遍带来了5帧以上的性能提升（60帧下）。
2. 跟美术提出单独做一级lod供开镜时使用，配合相应的lod切换策略，尽可能减少overdraw。最后做的模型效果不尽如人意。
3. 专门配置一套lod切换策略，用于开镜时使用。